<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: ApplicationController</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/controllers/application_controller.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ActionController::Base
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-projectizeName">::projectizeName</a>
    
    <li><a href="#method-i-authenticate">#authenticate</a>
    
    <li><a href="#method-i-convertUnitValue">#convertUnitValue</a>
    
    <li><a href="#method-i-getBaseUnit">#getBaseUnit</a>
    
    <li><a href="#method-i-getDBSize">#getDBSize</a>
    
    <li><a href="#method-i-getDatabaseType">#getDatabaseType</a>
    
    <li><a href="#method-i-projectizeName">#projectizeName</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./Attachment.html">Attachment</a>
  
    <li><a href="./AttachmentsController.html">AttachmentsController</a>
  
    <li><a href="./Classtype.html">Classtype</a>
  
    <li><a href="./Datatype.html">Datatype</a>
  
    <li><a href="./DynamicImagesController.html">DynamicImagesController</a>
  
    <li><a href="./Experiment.html">Experiment</a>
  
    <li><a href="./ExperimentsController.html">ExperimentsController</a>
  
    <li><a href="./Instance.html">Instance</a>
  
    <li><a href="./InstancesController.html">InstancesController</a>
  
    <li><a href="./Instancevalue.html">Instancevalue</a>
  
    <li><a href="./InstancevaluesController.html">InstancevaluesController</a>
  
    <li><a href="./InstancevaluesHelper.html">InstancevaluesHelper</a>
  
    <li><a href="./Instancevalueset.html">Instancevalueset</a>
  
    <li><a href="./InstancevaluesetsController.html">InstancevaluesetsController</a>
  
    <li><a href="./InstancevaluesetsHelper.html">InstancevaluesetsHelper</a>
  
    <li><a href="./PagesController.html">PagesController</a>
  
    <li><a href="./Shot.html">Shot</a>
  
    <li><a href="./ShotsController.html">ShotsController</a>
  
    <li><a href="./ShotsHelper.html">ShotsHelper</a>
  
    <li><a href="./Shottype.html">Shottype</a>
  
    <li><a href="./StatisticsController.html">StatisticsController</a>
  
    <li><a href="./Subsystem.html">Subsystem</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class ApplicationController</h1>

  <div id="description" class="description">
    
<p>General controller for the entire application.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-projectizeName" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">projectizeName</span><span
            class="method-args">(filename)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return a filename which contains the project name as defined in
<code>config/psdbconfig.yml</code> This function can be used to call
different files which are project specific. Example:</p>

<pre class="ruby"><span class="ruby-identifier">projectizeName</span>(<span class="ruby-string">&quot;logo.png&quot;</span>) =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">logo_PHELIX</span>.<span class="ruby-identifier">png</span> (<span class="ruby-keyword">for</span> <span class="ruby-identifier">project</span> <span class="ruby-identifier">name</span> <span class="ruby-constant">PHELIX</span>)
<span class="ruby-identifier">projectizeName</span>(<span class="ruby-string">&quot;logo.png&quot;</span>) =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">logo_POLARIS</span>.<span class="ruby-identifier">png</span> (<span class="ruby-keyword">for</span> <span class="ruby-identifier">project</span> <span class="ruby-identifier">name</span> <span class="ruby-constant">POLARIS</span>)
</pre>
<dl class="rdoc-list note-list"><dt>filename
<dd>
<p>the filename where the project name should be inserted.</p>
</dd></dl>
          

          
          <div class="method-source-code" id="projectizeName-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 135</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">projectizeName</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">projectName</span>=<span class="ruby-constant">PSDB_CONFIG</span>[<span class="ruby-string">&quot;project&quot;</span>][<span class="ruby-string">&quot;name&quot;</span>]
  <span class="ruby-identifier">dirname</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">extname</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">basename</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">extname</span>) <span class="ruby-comment">#basename without extension</span>
  <span class="ruby-identifier">extname</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dirname</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;.&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">basename</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;_&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">projectName</span><span class="ruby-operator">+</span><span class="ruby-identifier">extname</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">dirname</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">basename</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;_&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">projectName</span><span class="ruby-operator">+</span><span class="ruby-identifier">extname</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- projectizeName-source -->
          
        </div>

        

        
      </div><!-- projectizeName-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-authenticate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authenticate</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="authenticate-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">authenticate</span>
  <span class="ruby-identifier">authenticate_or_request_with_http_basic</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user_name</span>, <span class="ruby-identifier">password</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">user_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'admin'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">password</span> <span class="ruby-operator">==</span> <span class="ruby-string">'123123'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- authenticate-source -->
          
        </div>

        

        
      </div><!-- authenticate-method -->

    
      <div id="method-i-convertUnitValue" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">convertUnitValue</span><span
            class="method-args">(value,unit)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Convert a numeric value and a unit with prefix to the numerical value of
the base. This functions extracts the unit prefix and multiplies it by its
prefix value.</p>

<p>Example: 10 km =&gt; 10000, 123 cm =&gt; 1.23</p>
<dl class="rdoc-list note-list"><dt>value
<dd>
<p>numeric value to be converted</p>
<dl class="rdoc-list note-list"><dt>unit
<dd>
<p>unit string with prefix such as “cm” or “mBar”</p>
</dd></dl>
</dd></dl>
          

          
          <div class="method-source-code" id="convertUnitValue-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 14</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">convertUnitValue</span>(<span class="ruby-identifier">value</span>,<span class="ruby-identifier">unit</span>)
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">unit</span>.<span class="ruby-identifier">present?</span>)
      <span class="ruby-identifier">unit</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
    <span class="ruby-identifier">unitRegEx</span>=<span class="ruby-regexp">/^([afpnu\xC2\xB5\3316\2274mcdhkMGTPE]?)[ ]*(.+)/</span>
    <span class="ruby-identifier">matchSet</span>=<span class="ruby-identifier">unitRegEx</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">unit</span>)
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">matchSet</span>.<span class="ruby-identifier">nil?</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">prefix</span>=<span class="ruby-identifier">matchSet</span>[<span class="ruby-value">1</span>]
      <span class="ruby-identifier">baseUnit</span>=<span class="ruby-identifier">matchSet</span>[<span class="ruby-value">2</span>]
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">prefix</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;a&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-18</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;f&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-15</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;p&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-12</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;n&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-9</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;u&quot;</span>,<span class="ruby-string">&quot;\3316\2274&quot;</span>,<span class="ruby-string">&quot;\xC2\xB5&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-6</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;m&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-3</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;c&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-2</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;d&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E-1</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;h&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E2</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;k&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E3</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;M&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E6</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;G&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E9</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;T&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E12</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;P&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1</span>.<span class="ruby-constant">E15</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;E&quot;</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0E18</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">mult</span>=<span class="ruby-value">1.0</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>*<span class="ruby-identifier">mult</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-comment"># Return the physical dimension by stripping away any prefix.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment"># Example: &quot;mBar&quot; -&gt; &quot;Bar&quot;, &quot;km&quot; -&gt; &quot;m&quot;</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment"># unitString::</span>
<span class="ruby-comment"># the string to be converted.</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">getBaseUnit</span>(<span class="ruby-identifier">unitString</span>)
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">unitString</span>.<span class="ruby-identifier">present?</span>)
      <span class="ruby-identifier">unitString</span>.<span class="ruby-identifier">strip!</span>
      <span class="ruby-identifier">unitRegEx</span>=<span class="ruby-regexp">/^([afpnumcdhkMGTPE]?)[ ]*([\w%]+)/</span>
      <span class="ruby-identifier">matchSet</span>=<span class="ruby-identifier">unitRegEx</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">unitString</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">matchSet</span>[<span class="ruby-value">2</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">unitString</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-comment"># Return name of underlying database system (adaptor type) such as +OracleEnhanced+</span>
<span class="ruby-comment"># or +Mysql2+.</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">getDatabaseType</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">adapter_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-comment"># Return size information of the database as hash list. The way this information is retrieved</span>
<span class="ruby-comment"># is database specific. There currently exist methods for oracle and mysql. If the size could not</span>
<span class="ruby-comment"># be retrieved both hashes are set to -1.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment"># Example of a return value:</span>
<span class="ruby-comment">#   dbStats={:bytesUsed=&gt;1234556,:bytesFree=&gt;76544321}</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">getDBSize</span>
    <span class="ruby-identifier">dbStats</span>={<span class="ruby-value">:bytesUsed=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">-1</span>,<span class="ruby-value">:bytesFree=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">-1</span>}
    <span class="ruby-keyword">case</span> (<span class="ruby-identifier">getDatabaseType</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;OracleEnhanced&quot;</span>
        <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>.<span class="ruby-identifier">test?</span>) <span class="ruby-comment"># avoid problems while unit testing</span>
          <span class="ruby-identifier">queryString</span>=<span class="ruby-string">&quot;Select MAX(d.bytes) total_bytes,
                          nvl(SUM(f.Bytes), 0) free_bytes,
                          d.file_name,
                          MAX(d.bytes) - nvl(SUM(f.bytes), 0) used_bytes,
                          ROUND(SQRT(MAX(f.BLOCKS)/SUM(f.BLOCKS))*(100/SQRT(SQRT(COUNT(f.BLOCKS)))), 2) frag_idx
                          from   DBA_FREE_SPACE f , DBA_DATA_FILES d
                          where  f.tablespace_name(+) = d.tablespace_name
                            and    f.file_id(+) = d.file_id
                            and    d.tablespace_name = 'PHELIX'
                          group by d.file_name&quot;</span>
          <span class="ruby-identifier">stats</span>=<span class="ruby-constant">Shot</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">queryString</span>).<span class="ruby-identifier">last</span>
          <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesUsed</span>]=<span class="ruby-identifier">stats</span>.<span class="ruby-identifier">used_bytes</span>
          <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesFree</span>]=<span class="ruby-identifier">stats</span>.<span class="ruby-identifier">free_bytes</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Mysql2&quot;</span>
        <span class="ruby-identifier">bytesUsed</span>=<span class="ruby-value">0</span>
        <span class="ruby-identifier">bytesFree</span>=<span class="ruby-value">0</span>
        <span class="ruby-identifier">stats</span>=<span class="ruby-constant">Shot</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;SHOW TABLE STATUS&quot;</span>)
        <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">status</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">bytesUsed</span><span class="ruby-operator">+=</span><span class="ruby-identifier">status</span>.<span class="ruby-constant">Data_length</span>
          <span class="ruby-identifier">bytesUsed</span><span class="ruby-operator">+=</span><span class="ruby-identifier">status</span>.<span class="ruby-constant">Index_length</span>
          <span class="ruby-identifier">bytesFree</span><span class="ruby-operator">+=</span><span class="ruby-identifier">status</span>.<span class="ruby-constant">Data_free</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesUsed</span>]=<span class="ruby-identifier">bytesUsed</span>
        <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesFree</span>]=<span class="ruby-identifier">bytesFree</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">dbStats</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">projectizeName</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-constant">ApplicationController</span>.<span class="ruby-identifier">projectizeName</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-comment"># Return a filename which contains the project name as defined in &lt;tt&gt;config/psdbconfig.yml&lt;/tt&gt;</span>
<span class="ruby-comment"># This function can be used to call different files which are project specific.</span>
<span class="ruby-comment"># Example:</span>
<span class="ruby-comment">#   projectizeName(&quot;logo.png&quot;) =&gt; logo_PHELIX.png (for project name PHELIX)</span>
<span class="ruby-comment">#   projectizeName(&quot;logo.png&quot;) =&gt; logo_POLARIS.png (for project name POLARIS)</span>
<span class="ruby-comment"># filename::</span>
<span class="ruby-comment"># the filename where the project name should be inserted.</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">projectizeName</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">projectName</span>=<span class="ruby-constant">PSDB_CONFIG</span>[<span class="ruby-string">&quot;project&quot;</span>][<span class="ruby-string">&quot;name&quot;</span>]
    <span class="ruby-identifier">dirname</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">extname</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">basename</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">extname</span>) <span class="ruby-comment">#basename without extension</span>
    <span class="ruby-identifier">extname</span>=<span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dirname</span><span class="ruby-operator">==</span><span class="ruby-string">&quot;.&quot;</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">basename</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;_&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">projectName</span><span class="ruby-operator">+</span><span class="ruby-identifier">extname</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">dirname</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">basename</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;_&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">projectName</span><span class="ruby-operator">+</span><span class="ruby-identifier">extname</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-identifier">private</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">authenticate</span>
    <span class="ruby-identifier">authenticate_or_request_with_http_basic</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user_name</span>, <span class="ruby-identifier">password</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">user_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'admin'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">password</span> <span class="ruby-operator">==</span> <span class="ruby-string">'123123'</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- convertUnitValue-source -->
          
        </div>

        

        
      </div><!-- convertUnitValue-method -->

    
      <div id="method-i-getBaseUnit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getBaseUnit</span><span
            class="method-args">(unitString)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the physical dimension by stripping away any prefix.</p>

<p>Example: “mBar” -&gt; “Bar”, “km” -&gt; “m”</p>
<dl class="rdoc-list note-list"><dt>unitString
<dd>
<p>the string to be converted.</p>
</dd></dl>
          

          
          <div class="method-source-code" id="getBaseUnit-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">getBaseUnit</span>(<span class="ruby-identifier">unitString</span>)
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">unitString</span>.<span class="ruby-identifier">present?</span>)
    <span class="ruby-identifier">unitString</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-identifier">unitRegEx</span>=<span class="ruby-regexp">/^([afpnumcdhkMGTPE]?)[ ]*([\w%]+)/</span>
    <span class="ruby-identifier">matchSet</span>=<span class="ruby-identifier">unitRegEx</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">unitString</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">matchSet</span>[<span class="ruby-value">2</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">unitString</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- getBaseUnit-source -->
          
        </div>

        

        
      </div><!-- getBaseUnit-method -->

    
      <div id="method-i-getDBSize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getDBSize</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return size information of the database as hash list. The way this
information is retrieved is database specific. There currently exist
methods for oracle and mysql. If the size could not be retrieved both
hashes are set to -1.</p>

<p>Example of a return value:</p>

<pre class="ruby"><span class="ruby-identifier">dbStats</span>={:<span class="ruby-identifier">bytesUsed=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1234556</span>,:<span class="ruby-identifier">bytesFree=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">76544321</span>}
</pre>
          

          
          <div class="method-source-code" id="getDBSize-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">getDBSize</span>
  <span class="ruby-identifier">dbStats</span>={<span class="ruby-value">:bytesUsed=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">-1</span>,<span class="ruby-value">:bytesFree=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">-1</span>}
  <span class="ruby-keyword">case</span> (<span class="ruby-identifier">getDatabaseType</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;OracleEnhanced&quot;</span>
      <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>.<span class="ruby-identifier">test?</span>) <span class="ruby-comment"># avoid problems while unit testing</span>
        <span class="ruby-identifier">queryString</span>=<span class="ruby-string">&quot;Select MAX(d.bytes) total_bytes,
                        nvl(SUM(f.Bytes), 0) free_bytes,
                        d.file_name,
                        MAX(d.bytes) - nvl(SUM(f.bytes), 0) used_bytes,
                        ROUND(SQRT(MAX(f.BLOCKS)/SUM(f.BLOCKS))*(100/SQRT(SQRT(COUNT(f.BLOCKS)))), 2) frag_idx
                        from   DBA_FREE_SPACE f , DBA_DATA_FILES d
                        where  f.tablespace_name(+) = d.tablespace_name
                          and    f.file_id(+) = d.file_id
                          and    d.tablespace_name = 'PHELIX'
                        group by d.file_name&quot;</span>
        <span class="ruby-identifier">stats</span>=<span class="ruby-constant">Shot</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">queryString</span>).<span class="ruby-identifier">last</span>
        <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesUsed</span>]=<span class="ruby-identifier">stats</span>.<span class="ruby-identifier">used_bytes</span>
        <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesFree</span>]=<span class="ruby-identifier">stats</span>.<span class="ruby-identifier">free_bytes</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Mysql2&quot;</span>
      <span class="ruby-identifier">bytesUsed</span>=<span class="ruby-value">0</span>
      <span class="ruby-identifier">bytesFree</span>=<span class="ruby-value">0</span>
      <span class="ruby-identifier">stats</span>=<span class="ruby-constant">Shot</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-string">&quot;SHOW TABLE STATUS&quot;</span>)
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">status</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">bytesUsed</span><span class="ruby-operator">+=</span><span class="ruby-identifier">status</span>.<span class="ruby-constant">Data_length</span>
        <span class="ruby-identifier">bytesUsed</span><span class="ruby-operator">+=</span><span class="ruby-identifier">status</span>.<span class="ruby-constant">Index_length</span>
        <span class="ruby-identifier">bytesFree</span><span class="ruby-operator">+=</span><span class="ruby-identifier">status</span>.<span class="ruby-constant">Data_free</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesUsed</span>]=<span class="ruby-identifier">bytesUsed</span>
      <span class="ruby-identifier">dbStats</span>[<span class="ruby-value">:bytesFree</span>]=<span class="ruby-identifier">bytesFree</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">dbStats</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- getDBSize-source -->
          
        </div>

        

        
      </div><!-- getDBSize-method -->

    
      <div id="method-i-getDatabaseType" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getDatabaseType</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return name of underlying database system (adaptor type) such as
<code>OracleEnhanced</code> or <code>Mysql2</code>.</p>
          

          
          <div class="method-source-code" id="getDatabaseType-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">getDatabaseType</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">adapter_name</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- getDatabaseType-source -->
          
        </div>

        

        
      </div><!-- getDatabaseType-method -->

    
      <div id="method-i-projectizeName" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">projectizeName</span><span
            class="method-args">(filename)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="projectizeName-source">
            <pre><span class="ruby-comment"># File app/controllers/application_controller.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">projectizeName</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-constant">ApplicationController</span>.<span class="ruby-identifier">projectizeName</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- projectizeName-source -->
          
        </div>

        

        
      </div><!-- projectizeName-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

