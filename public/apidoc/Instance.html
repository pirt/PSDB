<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: Instance</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/models/instance.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ActiveRecord::Base
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-interfaceVersionInfo">#interfaceVersionInfo</a>
    
    <li><a href="#method-i-to_s">#to_s</a>
    
    <li><a href="#method-i-viewExists-3F">#viewExists?</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./Attachment.html">Attachment</a>
  
    <li><a href="./AttachmentsController.html">AttachmentsController</a>
  
    <li><a href="./Classtype.html">Classtype</a>
  
    <li><a href="./Datatype.html">Datatype</a>
  
    <li><a href="./DynamicImagesController.html">DynamicImagesController</a>
  
    <li><a href="./Experiment.html">Experiment</a>
  
    <li><a href="./ExperimentsController.html">ExperimentsController</a>
  
    <li><a href="./Instance.html">Instance</a>
  
    <li><a href="./InstancesController.html">InstancesController</a>
  
    <li><a href="./Instancevalue.html">Instancevalue</a>
  
    <li><a href="./InstancevaluesController.html">InstancevaluesController</a>
  
    <li><a href="./InstancevaluesHelper.html">InstancevaluesHelper</a>
  
    <li><a href="./Instancevalueset.html">Instancevalueset</a>
  
    <li><a href="./InstancevaluesetsController.html">InstancevaluesetsController</a>
  
    <li><a href="./InstancevaluesetsHelper.html">InstancevaluesetsHelper</a>
  
    <li><a href="./PagesController.html">PagesController</a>
  
    <li><a href="./Shot.html">Shot</a>
  
    <li><a href="./ShotsController.html">ShotsController</a>
  
    <li><a href="./ShotsHelper.html">ShotsHelper</a>
  
    <li><a href="./Shottype.html">Shottype</a>
  
    <li><a href="./StatisticsController.html">StatisticsController</a>
  
    <li><a href="./Subsystem.html">Subsystem</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Instance</h1>

  <div id="description" class="description">
    
<p>This class represents an instance which is most cases (but not
necessarily!) a  physical device such as
<code>PA_Nearfield_Input_Cam</code>. An <a
href="Instance.html">Instance</a> belongs to a <a
href="Subsystem.html">Subsystem</a> (e.g. <code>PreAmp</code>) and has a
certain <a href="Classtype.html">Classtype</a> (e.g.
<code>PH_IEEE1394_Cam</code>).</p>

<h2 id="label-Schema+Information">Schema Information</h2>

<p>Table name: instances</p>

<pre>id           :integer(38)     not null, primary key
classtype_id :integer(38)     not null
subsystem_id :integer(38)     not null
name         :string(255)     not null
created_at   :datetime        not null
updated_at   :datetime        not null</pre>

<h2 id="label-Validations">Validations</h2>

<p>The following validations exist:</p>
<ul><li>
<p>The instance name must be unique.</p>
</li><li>
<p>The instance name must not exceed 255 characters.</p>
</li><li>
<p>It must refer to a valid classtype</p>
</li><li>
<p>It must refer to a valid subsystem.</p>
</li></ul>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-interfaceVersionInfo" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">interfaceVersionInfo</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return information about exisiting interface versions of measurement data.
The return value is an array of hashes of all found interface version,
their shot id in which this version appeared first and the respective shot
date.</p>

<p>Example of a return value:</p>

<pre class="ruby"><span class="ruby-identifier">interfaceInfo</span>=[{:<span class="ruby-identifier">version=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>,:<span class="ruby-identifier">shot_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">123</span>,:<span class="ruby-identifier">shotDate=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1.1</span><span class="ruby-value">.2010</span>},
               {:<span class="ruby-identifier">version=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">3</span>,:<span class="ruby-identifier">shot_id=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">345</span>,:<span class="ruby-identifier">shotDate=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">2.2</span><span class="ruby-value">.2011</span>}]
</pre>
          

          
          <div class="method-source-code" id="interfaceVersionInfo-source">
            <pre><span class="ruby-comment"># File app/models/instance.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">interfaceVersionInfo</span>
  <span class="ruby-identifier">interfaceVersions</span>=<span class="ruby-keyword">self</span>.<span class="ruby-identifier">instancevaluesets</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:version</span>).<span class="ruby-identifier">group</span>(<span class="ruby-value">:version</span>)
  <span class="ruby-identifier">interfaceInfo</span>=[]
  <span class="ruby-identifier">interfaceVersions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">interfaceVersion</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">shotId</span>=<span class="ruby-keyword">self</span>.<span class="ruby-identifier">instancevaluesets</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">interfaceVersion</span>.<span class="ruby-identifier">version</span>).<span class="ruby-identifier">minimum</span>(<span class="ruby-value">:shot_id</span>)
    <span class="ruby-identifier">shotDate</span>=<span class="ruby-constant">Shot</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">shotId</span>).<span class="ruby-identifier">created_at</span>
    <span class="ruby-identifier">interfaceInfo</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">interfaceVersion</span>.<span class="ruby-identifier">version</span>, <span class="ruby-value">:shot_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">shotId</span>, <span class="ruby-value">:shotDate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">shotDate</span>}
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">interfaceInfo</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- interfaceVersionInfo-source -->
          
        </div>

        

        
      </div><!-- interfaceVersionInfo-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the name of the instance. This function was added to simplify views.</p>
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File app/models/instance.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
      <div id="method-i-viewExists-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">viewExists?</span><span
            class="method-args">(interfaceVersion,detailed=false)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Check if a view for the given instance and the given interface version
exists. Returns true if successful and false otherwise.</p>
<dl class="rdoc-list note-list"><dt>interfaceVersion
<dd>
<p>check for a view with this API version number. This version number is part
of the viewâ€™s filename (e.g.
<code>views/instancevaluesets/&lt;classname&gt;/<em>short</em>&lt;interfaceVersion&gt;.html.erb</code>)</p>
<dl class="rdoc-list note-list"><dt>detailed
<dd>
<p>if false it checks whether if a short view exists otherwise it checks for
the existence of a detailed view.</p>
</dd></dl>
</dd></dl>
          

          
          <div class="method-source-code" id="viewExists-3F-source">
            <pre><span class="ruby-comment"># File app/models/instance.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">viewExists?</span>(<span class="ruby-identifier">interfaceVersion</span>,<span class="ruby-identifier">detailed</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">viewType</span>= <span class="ruby-identifier">detailed</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;/_detailed_&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;/_short_&quot;</span>
  <span class="ruby-identifier">viewFileName</span>=<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;/app/views/instancevaluesets/&quot;</span><span class="ruby-operator">+</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">classtype</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-identifier">viewType</span><span class="ruby-operator">+</span><span class="ruby-identifier">interfaceVersion</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-string">&quot;.html.erb&quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">viewFileName</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- viewExists-3F-source -->
          
        </div>

        

        
      </div><!-- viewExists-3F-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

